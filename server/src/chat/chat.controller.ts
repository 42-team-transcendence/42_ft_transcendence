import { Controller, ForbiddenException, Get, Post, Param, UseGuards, Body } from "@nestjs/common";
import { User } from '@prisma/client'; //User Typescript type generated by Prisma
import { JwtGuard } from "../auth/guard";
import { GetUser } from "../auth/decorator"
import { ChatService } from "./chat.service";
import { CreateChatDto } from "./dto";

@UseGuards(JwtGuard) //link this custom guard (check for jwt token for every user route of this controller) to our strategy named 'jwt' in file jwt.strategy.ts. 
@Controller('chats') // d√©finit la route "/users" de l'API
export class ChatController {
	constructor (
		private chatService: ChatService
	) {}
	
	@Post()
	createChat(
        @Body() payload : CreateChatDto
    ) {
		console.log(payload);
		return (this.chatService.createChat(payload));
	}
}